(window["webpackJsonpcaro-game-updated"]=window["webpackJsonpcaro-game-updated"]||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(9),o=n.n(a),c=n(1),s=n(2),u=n(4),h=n(3),d=n(5),l=(n(15),n(16),n(6)),f=function(e){var t=e.onClick,n=e.value,r=e.x,a=e.y,o=e.isHighLight,c=o?{borderColor:"red",borderWidth:1,borderStyle:"solid",margin:1}:{},s={};return i.a.createElement("button",{onClick:function(){t(r,a)},className:"square",style:s},i.a.createElement("div",{style:c},n))},v=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"renderBoard",value:function(e){for(var t=this.props,n=t.onCellClick,r=t.data,a=t.highlightRange,o=[],c=0;c<e;c++)o.push(i.a.createElement(y,{key:c,size:e,index:c,row:r[c],onCellClick:n,highlightRange:a}));return o}},{key:"render",value:function(){var e=this.props.size;return i.a.createElement("div",null,this.renderBoard(e))}}]),t}(r.Component),y=function(e){for(var t=e.size,n=e.index,r=e.row,a=e.onCellClick,o=e.highlightRange,c=function(e,t){return void 0!==(o||[]).find((function(n){return n.x===e&&n.y===t}))},s=[],u=0;u<t;u++){var h=c(u,n);s.push(i.a.createElement(f,{key:"".concat(u,"_").concat(n),x:u,y:n,value:r[u],isHighLight:h,onClick:function(e,t){return a(e,t)}}))}return i.a.createElement("div",{className:"board-row"},s)},x=v,m=n(7),b=function(){function e(t,n){Object(c.a)(this,e),this.x=t,this.y=n}return Object(s.a)(e,[{key:"isInSize",value:function(e){return this.x>=0&&this.y>=0&&this.x<e&&this.y<20}}]),e}(),k=function(){function e(t){Object(c.a)(this,e),this.state=t,this.startIndex=void 0,this.endIndex=void 0}return Object(s.a)(e,[{key:"calRange",value:function(){if(void 0===this.startIndex)return[];if(void 0===this.endIndex)return[];if(!this.endIndex instanceof b)return[];if(!this.startIndex instanceof b)return[];var e=[];if(this.startIndex.x===this.endIndex.x)for(var t=this.startIndex.x,n=Math.min(this.startIndex.y,this.endIndex.y),r=Math.max(this.startIndex.y,this.endIndex.y),i=n;i<=r;i++)e.push(new b(t,i));else if(this.startIndex.y===this.endIndex.y)for(var a=this.startIndex.y,o=Math.min(this.startIndex.x,this.endIndex.x),c=Math.max(this.startIndex.x,this.endIndex.x),s=o;s<=c;s++)e.push(new b(s,a));else for(var u=Math.min(this.startIndex.x,this.endIndex.x),h=Math.max(this.startIndex.x,this.endIndex.x),d=this.startIndex.y<this.endIndex.y?1:-1,l=this.startIndex.y,f=u;f<=h;f++)e.push(new b(f,l)),l+=d;return e}}]),e}(),w=function e(t,n,r,i){Object(c.a)(this,e),this.data=Object(m.a)(t.map((function(e){return Object(m.a)(e)}))),this.current=n,this.currentPostion=r,this.winner=i},p=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={history:[]},n.index=-1,n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"pushHistory",value:function(e){var t=this.state.history;-1!==this.index&&(t=t.slice(0,this.index+1)),t.push(new w(e.board,e.current,e.currentPostion,e.winner)),this.setState({history:t})}},{key:"clearHistory",value:function(){this.setState({history:[]})}},{key:"renderWiner",value:function(e){return void 0!==e?i.a.createElement("p",null,"Winner is ".concat(e.state)):i.a.createElement("div",null)}},{key:"onClick",value:function(e,t){var n=this.props.onClick,r={board:e.data,current:e.current,currentPostion:e.currentPostion,winner:e.winner};this.index=t,n(r,t)}},{key:"renderHistory",value:function(){var e=this;return this.state.history.map((function(t,n){if(void 0===t.data)return i.a.createElement("div",null);if(void 0===t.currentPostion||!t.currentPostion instanceof b)return i.a.createElement("div",null);var r=t.data,a=t.currentPostion,o=(r[a.y]||[])[a.x]||"";return i.a.createElement("li",{key:n},i.a.createElement("button",{className:"history",onClick:function(){e.onClick(t,n)}},"".concat(o," moved on column ").concat(a.x," row ").concat(a.y)))}))}},{key:"render",value:function(){var e=this.props,t=e.nextMove,n=e.winner;return i.a.createElement("div",null,this.renderWiner(n),i.a.createElement("p",null,"Next move: ".concat(t)),i.a.createElement("ol",null,this.renderHistory(),"  "))}}]),t}(r.Component),j=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).size=20,n.state={current:!1,board:n.initBoard(n.size),currentPostion:new b(-1,-1),history:[]},n.notification=i.a.createRef(),n.onCellClick=n.onCellClick.bind(Object(l.a)(n)),n.onRetry=n.onRetry.bind(Object(l.a)(n)),n.getWinnerRange=n.getWinnerRange.bind(Object(l.a)(n)),n.jumpTo=n.jumpTo.bind(Object(l.a)(n)),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onCellClick",value:function(e,t){var n=this,r=this.state,i=r.board,a=r.current,o=r.winner;if(""===i[t][e]&&void 0===o){i[t][e]=a?"x":"o";var c={board:i,current:!a,currentPostion:new b(e,t),winner:o};this.notification.current.pushHistory(c),this.setState(c,(function(){var e=n.checkWin();void 0!==e&&n.setState({winner:e})}))}}},{key:"check2Head",value:function(e,t,n,r){if(n.isInSize(20)&&r.isInSize(20)){var i=function(e,t){return(e[t.y]||[])[t.x]||""},a=i(e,n),o=i(e,r);return""!==a&&(""!==o&&(a===o&&a!==t))}return!1}},{key:"checkBoard",value:function(e,t,n,r,i){for(var a="",o="",c=new b(-1,-1),s=new b(-1,-1),u=t(),h=n(),d=u,l=new k(void 0);;){var f=e[d.y][d.x];if(""!==f&&void 0!==f&&(a!==f?(a=f,o=1,c=i(d),l.startIndex=d):o++,5===o&&(s=r(d),l.endIndex=d,!this.check2Head(e,a,c,s))))return l.state=a,l;if((d=r(d)).x===h.x&&d.y>h.y||d.x>h.x)break}}},{key:"checkWin",value:function(){var e=this.state,t=e.board,n=e.currentPostion,r=n.x,i=n.y,a=this.size-1,o=this.checkBoard(t,(function(){return new b(0,i)}),(function(){return new b(a,i)}),(function(e){return new b(e.x+1,i)}),(function(e){return new b(e.x-1,i)}));if(void 0!==o)return o;var c=this.checkBoard(t,(function(){return new b(r,0)}),(function(){return new b(r,a)}),(function(e){return new b(r,e.y+1)}),(function(e){return new b(r,e.y-1)}));if(void 0!==c)return c;var s=this.checkBoard(t,(function(){return r>i?new b(r-i,0):new b(0,i-r)}),(function(){return r>i?new b(a,i+a-r):new b(r+a-i,a)}),(function(e){return new b(e.x+1,e.y+1)}),(function(e){return new b(e.x-1,e.y-1)}));if(void 0!==s)return s;var u=this.checkBoard(t,(function(){return i>a-r?new b(a-1,r+i-a):new b(0,r+i)}),(function(){return i>a-r?new b(r+i-a,a-1):new b(r+i,0)}),(function(e){return new b(e.x+1,e.y-1)}),(function(e){return new b(e.x-1,e.y+1)}));return void 0!==u?u:void 0}},{key:"onRetry",value:function(){this.setState({current:!1,board:this.initBoard(this.size),currentPostion:new b(-1,-1),winner:void 0}),this.notification.current.clearHistory()}},{key:"initBoard",value:function(e){return Array(e).fill("").map((function(){return Array(e).fill("")}))}},{key:"getWinnerRange",value:function(){var e=this.state.winner;return void 0!==e?e.calRange():[]}},{key:"jumpTo",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.state,t=e.board,n=e.current,r=e.winner;return i.a.createElement("div",{className:"game"},i.a.createElement("div",null,i.a.createElement(x,{size:this.size,data:t,highlightRange:this.getWinnerRange(),onCellClick:this.onCellClick}),i.a.createElement("button",{className:"retry",onClick:this.onRetry},"Retry")),i.a.createElement("div",{className:"game-info"},i.a.createElement(p,{ref:this.notification,nextMove:n?"x":"o",winner:r,onClick:this.jumpTo})))}}]),t}(r.Component),g=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(j,null))}}]),t}(r.Component);n(17);o.a.render(i.a.createElement(g,null),document.getElementById("root"))}],[[10,1,2]]]);
//# sourceMappingURL=main.641c451b.chunk.js.map